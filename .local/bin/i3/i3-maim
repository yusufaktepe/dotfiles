#!/bin/sh
# 2018 Yusuf Aktepe <yusuf@yusufaktepe.com>
# https://github.com/yusufaktepe/dotfiles

ss_dir="$HOME/pix/screenshots"
format="+%Y-%m-%d_%H-%M-%S"

[ ! -d "$ss_dir" ] && mkdir -p "$ss_dir"

[ -n "$2" ] && cmd="maim -d $2" || cmd="maim"

case "$1" in
	--desk|-d|$NULL)
		$cmd "$ss_dir"/ss-full-"$(date $format)".png &&
		sleep 1 &&
		notify-send "screenshot has been saved in $ss_dir"
		;;
	--window|-w)
		$cmd -i "$(xdotool getactivewindow)" "$ss_dir"/ss-window-"$(date $format)".png &&
		sleep 1 &&
		notify-send "screenshot has been saved in $ss_dir"
		;;
	--select|-s)
		notify-send 'select an area for the screenshot' &
		$cmd -s "$ss_dir"/ss-selected-"$(date $format)".png &&
		sleep 1 && notify-send "screenshot has been saved in $ss_dir"
		;;
	--help|-h)
		echo "
available options:
-d | --desk    full screen
-w | --window  active window
-s | --select  selection
-h | --help    display this information

The -d or -w options can be used with a delay
by adding the number of seconds, like for example:
'i3-maim -w 5'

Default option is 'full screen'.
"

	exit 2
esac

exit 0
