#!/bin/bash
# Temporary fix for Spotify(d) volume control
# usage: spotify-vol +/-10

id=
devices=$(pactl list sink-inputs | grep -oP '(Sink Input #\K[^"]+)|(application.process.binary = "\K[^"]+)')
IFS=' ' read -r -a array <<< "$(echo $devices)"

# Iterate through devices to find Spotify's sink id
i=0
for item in ${array[*]}; do
	case "$item" in
		spotify*)
			id=${array[$i-1]}
			echo "$id"
	esac
	i=$((i + 1))
done

case "$1" in
	-*) pactl set-sink-input-volume "$id" -"${1:1:2}"% ;;
	+*) pactl set-sink-input-volume "$id" +"${1:1:2}"% ;;
	set) pactl set-sink-input-volume "$id" "$2"% ;;
	mute) pactl set-sink-input-mute "$id" toggle ;;
esac

