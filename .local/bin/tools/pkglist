#!/bin/sh
# shellcheck disable=SC2024

cd /data/backup/pkglists || return

pacman -Qqen > pkglist
pacman -Qm   > pkglist-aur
pacman -Qqn  > pkglist_full

git add --all . && git commit -m "$(date +%F)" && git push

case $1 in
	*aur*|*full*) yay -S --needed - < "$1" ;;
	"") exit ;;
	*) sudo pacman -S --needed - < "$1" ;;
esac

