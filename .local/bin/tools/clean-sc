#!/bin/sh
# Spotify cache cleaner.

BD=$(tput bold)
NM=$(tput sgr0)

if [ "$(id -u)" = "0" ]; then
	printf '%s' "${BD}ERROR :: This script must be run as normal user. Exit.${NM}\n" 1>&2
	exit 1
fi

dir="$HOME/.cache/spotify"

if [ -d "$dir" ] && [ -d "$dir/Browser/Cache" ] && [ -d "$dir/Data" ] && [ -d "$dir/Storage" ]; then
		printf '%s' "${BD}INFO :: BEFORE CLEANING${NM}\n"
		du -h -d 0 "$dir"
		printf '%s' "${BD}---------------------------------------${NM}\n"
		printf '%s' "${BD}INFO :: CLEANING SPOTIFY CACHE...${NM}\n"
		rm -rf "$dir/Browser/Cache/*" "$dir/Data/*" "$dir/Storage/*"
		printf '%s' "${BD}---------------------------------------${NM}\n"
		printf '%s' "${BD}INFO :: AFTER CLEANING${NM}\n"
		du -h -d 0 "$dir"
else
		printf '%s' "${BD}ERROR :: Spotify cache directories not found. Exit.${NM}\n"
		exit 1
fi
