#!/bin/sh

AW=$(xdotool getactivewindow)
AW_CLASS=$(xprop -id "$AW" WM_CLASS | cut -d\" -f4)

if pidof -q cantata; then
	if [ "$AW_CLASS" = cantata ]; then
		i3-msg -q 'workspace back_and_forth'
	else
		i3-msg -q '[class="cantata"] focus'
	fi
else
	if pidof -q mpd; then
		cantata
	else
		mpd; sleep .4; cantata
		wait
		mpd --kill
	fi
fi

