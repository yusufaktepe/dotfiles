# vim: filetype=i3config
#=====================================================================
# i3 config by Yusuf Aktepe <yusuf@yusufaktepe.com>
# https://github.com/yusufaktepe/dotfiles
#=====================================================================

# Set mod keys (Mod1=<Alt>, Mod4=<Super>, Mod3=<Hyper_L>, Mod5=<AltGr>)
set $mod	Mod4
set $alt	Mod1
set $caps	Mod3
set $agr	Mod5

floating_modifier $mod

# Set basic vars
set $N --no-startup-id
set $C exec $N pkill -0
set $term $N $TERMINAL
set $termins $N $TERMINAL_N

# set default desktop layout (default is tiling)
# workspace_layout tabbed <stacking|tabbed>

# Configure border style <normal|pixel <px>|none>
default_border pixel 1
default_floating_border normal

# floating window size
#floating_minimum_size -1 x -1
#floating_maximum_size -1 x -1

# Hide borders
hide_edge_borders none

# change borders
bindsym $mod+Ctrl+b border toggle

# Font used by titles & bar -unless otherwise stated in the bar{} block-
font pango:Hack, Awesome 9

# kill focused window
set $killrule [con_id="__focused__" instance="^(?!dropdown_).*$"]
bindsym $mod+q		$killrule kill
bindsym $mod+Shift+q	$killrule exec $N kill -9 `xdotool getwindowfocus getwindowpid`
bindsym $mod+Ctrl+x	--release exec $N xkill

# #---Start a terminal---# #
bindsym $mod+Return exec $term
bindsym $mod+quotedbl exec $termins floating
bindsym $mod+comma split horizontal ;; exec $term
bindsym $mod+period split vertical ;; exec $term
bindsym $mod+udiaeresis exec $N ddspawn tmuxdd
# open terminal in current dir
bindsym $mod+Shift+Return exec $N samedir

# #---Rofi---# #
bindsym $mod+d exec $N rofi -show combi
bindsym $mod+c exec $N "rofi -show calc -modi calc -no-show-match -no-sort"
bindsym $caps+d exec $N rofi-pass
bindsym $caps+f exec $N rofi-finder
# bindsym XF86Launch2 exec $N rofi -show combi
bindsym XF86Launch9 exec $N rofi-translate

# #---Clipboard management---# #
bindsym Ctrl+quotedbl exec $N gclip
bindsym $caps+quotedbl exec $N gclip clear
bindsym Ctrl+$caps+quotedbl exec $N gclip rld
bindsym $caps+Insert exec $N showclip
bindsym $agr+space exec $N cabl

# #---Start Applications---# #
bindsym $mod+F1 exec $term -e $FILE
bindsym $mod+F2 exec $N ifwin doublecmd
bindsym $mod+F3 exec $N ifwin vivaldi
bindsym $mod+F4 exec $N ifwin opera
bindsym $mod+F5 exec $N ifwin firefox
bindsym $mod+F6 exec $N ifwin chrome
bindsym $mod+Shift+F2 exec $N pcmanfm
bindsym $mod+Shift+F3 exec $N vivaldi-stable --incognito --start-maximized
bindsym $mod+Shift+F4 exec $N opera --private --start-maximized
bindsym $mod+Shift+F5 exec $N firefox --private-window
bindsym $mod+Shift+F6 exec $N google-chrome-stable --incognito
bindsym --release $mod+Ctrl+e exec $N ifwin crow

## Caps+
bindsym $caps+e exec $term -e $EDITOR
bindsym $caps+m exec $N cantata-mpd
bindsym $caps+s exec $N ifwin spotify
bindsym $caps+q exec $N ifwin qbittorrent
bindsym $caps+v exec $N ifwin smplayer
bindsym $caps+7 exec $N ifwin vbox Win7
bindsym $caps+w exec $N libreoffice --writer

bindsym $mod+Shift+d exec $N cdd
bindsym $mod+Shift+e exec $N cfg
bindsym $mod+Shift+F12 exec $N sudo -A systemctl restart NetworkManager
bindsym $mod+F12 exec $termins "_nmtui" -e "nmtui-connect"

# Pause players & switch to ws0:
bindsym $mod+Shift+Delete exec $N smc pauseall; workspace 0

## Function Buttons
bindsym XF86Launch1 exec $termins htop-floating -e htop

bindsym XF86MonBrightnessUp exec $N "light -A 5; pkill -RTMIN+10 i3blocks"
bindsym XF86MonBrightnessDown exec $N "light -U 5; pkill -RTMIN+10 i3blocks"
bindsym $mod+XF86MonBrightnessDown --release exec $N sleep 1 && xset dpms force off

bindsym XF86Display exec $N displayselect
bindsym XF86TouchpadOff exec $N toggle touchpad
bindsym XF86TouchpadOn exec $N toggle touchpad

bindsym XF86Launch3 exec $N dmenumount
bindsym Shift+XF86Launch3 exec $N dmenuumount

## Media Control
bindsym XF86AudioPlay exec $N smc t
bindsym XF86AudioPrev exec $N smc p
bindsym XF86AudioNext exec $N smc n
bindsym $caps+less exec $N smc t
bindsym $caps+z exec $N smc p
bindsym $caps+x exec $N smc n

## Screenshots
bindsym Print exec $N i3-maim
bindsym $mod+Print --release exec $N i3-maim -w
bindsym Ctrl+Print --release exec $N i3-maim -s
bindsym Shift+Print exec $N maimpick

## Set temporary transparency
bindsym $mod+Ctrl+KP_Divide exec transset-df -a 1
bindsym $mod+Ctrl+KP_Multiply exec transset-df -a 0.5
bindsym $mod+Ctrl+KP_Add exec transset-df -a --inc 0.1
bindsym $mod+Ctrl+KP_Subtract exec transset-df -a --min 0.2 --dec 0.1

#=====================================================================

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

#focus_follows_mouse no

# move focused window
bindsym $mod+Shift+h move left	30
bindsym $mod+Shift+j move down	30
bindsym $mod+Shift+k move up	30
bindsym $mod+Shift+l move right	30

# alternatively, you can use the cursor keys:
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# split orientation
bindsym $mod+g split h; exec notify-send 'tile horizontally'
bindsym $mod+v split v; exec notify-send 'tile vertically'
bindsym $mod+t split toggle

# toggle fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle
bindsym $mod+Shift+F11 fullscreen toggle global

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+e layout toggle tabbed split
bindsym $mod+w layout stacking

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle
bindsym $caps+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle
bindsym $alt+Escape focus mode_toggle

# toggle sticky: show on all ws
bindsym $mod+s sticky toggle

# focus the parent/child container
bindsym $mod+a focus parent
bindsym $mod+Shift+a focus child

# Scratchpad
bindsym $mod+minus floating enable; move scratchpad
bindsym $mod+asterisk move scratchpad
bindsym $mod+Shift+asterisk scratchpad show; floating disable
bindsym $mod+Shift+minus [instance="^(?!dropdown_*)"] scratchpad show
bindsym $caps+minus [class=".*"] scratchpad show
bindsym $mod+Shift+udiaeresis [class="St" instance="^(?!dropdown_*)"] scratchpad show
bindsym $mod+Shift+gbreve [class="^(?!St|smplayer|mpv)"] scratchpad show

# Bottom left-right with script
bindsym $mod+Shift+b floating toggle; sticky toggle; exec $N hover left
bindsym $mod+Shift+n floating toggle; sticky toggle; exec $N hover right

# Resize with script
bindsym $mod+Shift+y exec $N i3resize left
bindsym $mod+Shift+u exec $N i3resize down
bindsym $mod+Shift+idotless exec $N i3resize up
bindsym $mod+Shift+o exec $N i3resize right

# put YouTube into fullscreen and execute this for media mode
bindsym $caps+y fullscreen disable; floating enable; resize set 655 368; sticky enable; move window to position 711 400

# focus on the rightmost window and execute this for grid layout
set $fl focus left
set $fr focus right
bindsym $caps+g $fl;$fl;$fl;split v;$fr;move left;$fr;split v;$fr;move left

# Workspace names
set $ws1 1
set $ws2 2
set $ws3 3
set $ws4 4
set $ws5 5
set $ws6 6
set $ws7 7
set $ws8 8
set $ws9 9
set $ws10 10
set $ws11 "11:"
set $ws12 "12:"
set $ws13 "13:"

# switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

# Move focused container to workspace
bindsym $mod+Ctrl+1 move container to workspace $ws1
bindsym $mod+Ctrl+2 move container to workspace $ws2
bindsym $mod+Ctrl+3 move container to workspace $ws3
bindsym $mod+Ctrl+4 move container to workspace $ws4
bindsym $mod+Ctrl+5 move container to workspace $ws5
bindsym $mod+Ctrl+6 move container to workspace $ws6
bindsym $mod+Ctrl+7 move container to workspace $ws7
bindsym $mod+Ctrl+8 move container to workspace $ws8
bindsym $mod+Ctrl+9 move container to workspace $ws9
bindsym $mod+Ctrl+0 move container to workspace $ws10

# Move to workspace with focused container
bindsym $mod+Shift+1 move container to workspace $ws1; workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2; workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3; workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4; workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5; workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6; workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7; workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8; workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9; workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10; workspace $ws10

bindsym $mod+Home		workspace $ws1
bindsym $mod+End		workspace $ws10
bindsym $mod+Shift+Home		move container to workspace $ws1
bindsym $mod+Shift+End		move container to workspace $ws10
bindsym $mod+Prior		workspace prev
bindsym $mod+Next		workspace next
bindsym $mod+Shift+Tab		workspace prev
bindsym $mod+Tab		workspace next
bindsym $mod+Shift+Prior	move container to workspace prev
bindsym $mod+Shift+Next		move container to workspace next
bindsym $mod+$alt+Left		move container to workspace prev; workspace prev
bindsym $mod+$alt+Right		move container to workspace next; workspace next
bindsym $mod+Escape		workspace back_and_forth
bindsym $alt+Tab		workspace back_and_forth
bindsym $alt+Shift+Tab		move container to workspace back_and_forth; workspace back_and_forth

# Selecting current workspace switches back and forth
workspace_auto_back_and_forth yes

# Jump to urgent window
bindsym $mod+x [urgent=latest] focus

#=====================================================================
# Window/WS Rules
#=====================================================================

## Set some workspaces to tabbed by default
for_window [workspace="$ws2|$ws9|$ws10"] layout tabbed

## Assign applications to workspaces
#assign [window_role="browser"]				$ws1
assign [class="Firefox|(?i)Vivaldi"]			$ws1
assign [class="Pcmanfm|Doublecmd"]			$ws2
# assign [class="(?i)thunderbird"]			$ws9
assign [class="qBittorrent"]				$ws10
for_window [class="Spotify"] move to workspace		$ws11
assign [class="cantata"]				$ws12
assign [class="(?i)VirtualBox" title="(?i)Win7"]	$ws13

## Window Rules
for_window [class="(?i)nm-connection-editor|(?i)blueman|(?i)pinentry|(?i)recordmydesktop|(?i)qemu-system"] floating enable
for_window [class="Catfish|Gcolor3|(?i)Gnome-calc|Gnome-disks|GParted|(?i)telegram|Yad|Tor Browser"] floating enable
for_window [class="Lxappearance|qt5ct|Lightdm-settings|Arandr|Engrampa|Gucharmap|Uget-gtk"] floating enable border normal
for_window [class="(?i)pavucontrol"] floating enable, move position +861+25
for_window [class="(?i)pavucontrol" instance="pavucontrol-bar"] move down $height px
for_window [class="(?i)VirtualBox" title="(?i)Manager"] floating enable
#for_window [class="(?i)VirtualBox"] floating enable
for_window [class="mpv|vlc"] floating enable sticky enable
for_window [class="smplayer" title="^( - |)SMPlayer$"] floating enable sticky enable,resize set 670 457, move position +696+311
for_window [class="smplayer" title="^Choose a (file|directory)$"] resize set 800 600, move position center
for_window [class="qBittorrent" title="Open Torrent Files|Choose save path"] resize set 800 600, move position center
for_window [instance="Places" class="Firefox"] floating enable border normal, resize set 800 600, move position center
for_window [instance="Browser|Update" class="Firefox|Tor Browser"] floating enable border normal
for_window [instance="(?i)crx_" class="(?i)Vivaldi|-chrome"] floating enable sticky enable
for_window [class="Crow Translate"] floating enable sticky enable, resize set 650 290, move position +716+20
for_window [class="Sunflower" title="(?i)Viewer"] floating enable
for_window [class="(?i)gsimplecal"] floating enable, move position +1149+20
#_ Dialogs
for_window [window_role="GtkFileChooserDialog"] resize set 800 665, move position center
for_window [window_role="pop-up|bubble|task_dialog|Preferences"] floating enable
for_window [window_type="dialog|menu"] floating enable
for_window [title="^Confirm File Replacing$"] move position center
for_window [title="^Picture in picture$"] resize set 605 340, move position 761 428
#_ Floating instances
for_window [instance="_blockterm|_nmtui"] floating enable border pixel 2
for_window [instance="floating"] floating enable, move position mouse
#_ Doublecmd
for_window [window_role="Tfrm(FileOp|ViewOperations|OpenWith|Options|FindDlg)"] floating enable, move position center
for_window [window_role="Tfrm(Viewer|Editor)"] floating enable, resize set 800 600, move position center
for_window [instance="dc-term-bttns"] floating enable, resize set 800 500, move position center
#_ Bindings to make the webcam float and stick.
for_window [title="mpvfloat"] floating enable sticky enable border pixel 0
no_focus [title="mpvfloat"]
#_ General dropdown window traits. The order can matter.
for_window [instance="dropdown_*"] floating enable, move scratchpad, sticky enable, scratchpad show
for_window [instance="dropdown_tmuxdd"] border pixel 3, resize set 625 450
for_window [instance="dropdown_*"] move position center

# switch to workspace with urgent window automatically
#for_window [urgent=latest] focus

#=====================================================================

# reload the configuration file
bindsym $mod+Shift+c reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

#=====================================================================
# Autostart applications
#=====================================================================

exec $N /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec $N setbg; sleep 1; picom -b
exec $N dunst
exec $N nm-applet
exec $N redshift
exec $N remaps
exec $N numlockx
exec $N greenclip daemon
exec $N unclutter
#exec $N xautolock -time 10 -locker "betterlockscreen -l dimblur"

#=====================================================================
# i3wm & bar customization
#=====================================================================

# Set Xresources colors:
set_from_resource $term_background	background
set_from_resource $term_foreground	foreground
set_from_resource $darkblack		color0	#000000
set_from_resource $black		color8	#000000
set_from_resource $darkred		color1	#000000
set_from_resource $red			color9	#000000
set_from_resource $darkgreen		color2	#000000
set_from_resource $green		color10	#000000
set_from_resource $darkyellow		color3	#000000
set_from_resource $yellow		color11	#000000
set_from_resource $darkblue		color4	#000000
set_from_resource $blue			color12	#000000
set_from_resource $darkmagenta		color5	#000000
set_from_resource $magenta		color13	#000000
set_from_resource $darkcyan		color6	#000000
set_from_resource $cyan			color14	#000000
set_from_resource $darkwhite		color7	#000000
set_from_resource $white		color15	#000000
set $transparent 			#00000000

# Use custom colors for black
set $black				#282828

# Start i3bar to display a workspace bar (plus the system information i3status if available)
bar {
	i3bar_command i3bar
	status_command i3blocks
	position top
	modifier none

## set your primary output first. Example: 'xrandr --output eDP1 --primary'
#	tray_output primary
#	tray_output eDP1

	bindsym button4 nop
	bindsym button5 nop
	#font pango:Hack, FontAwesome 9
	strip_workspace_numbers yes
	#separator_symbol ""
	tray_padding 0

	colors {
		background	$darkblack
		statusline	$darkwhite
		#separator	$cyan
		separator	#454947

#				BORDER		BACKGR.		TEXT
	focused_workspace	$blue		$darkblue	$darkblack
	active_workspace	$blue		$blue		$darkwhite
	inactive_workspace 	$darkblack	$darkblack	$white
	urgent_workspace	$darkred	$darkblack	$darkred

	binding_mode		$blue		$darkblue	$darkblack
	}
}

# hide/unhide i3status bar
bindsym $mod+b bar mode toggle

# Theme colors
#				BORDER		BACKGROUND	TEXT		INDICATOR	CHILD_BORDER
client.focused			$darkblue	$darkblue	$white		$darkblack	$darkblue
client.unfocused		$black		$black		$darkwhite	$darkblack	$black
client.focused_inactive		$black		$black		$white		$darkblack	$black
client.urgent			$darkred	$darkred	$black		$darkred	$darkred

client.placeholder		#000000		#0c0c0c		#ffffff		#000000

client.background		$black

#=====================================================================
# settings for i3-gaps:
#=====================================================================

# Set inner/outer gaps
# gaps inner 4
# gaps outer -4

# Additionally, you can issue commands with the following syntax. This is useful to bind keys to changing the gap size.
# gaps inner|outer current|all set|plus|minus <px>
# gaps inner all set 10
# gaps outer all plus 5

# workspace $ws9 gaps inner 0
# workspace $ws9 gaps outer 0

# Smart gaps (gaps used if only more than one container on the workspace)
# smart_gaps on

# Smart borders (draw borders around container only if it is not the only container on this workspace)
# on|no_gaps (on=always activate and no_gaps=only activate if the gap size to the edge of the screen is 0)
smart_borders on

# Current WS gaps
bindsym $mod+KP_Add		gaps inner current plus 4
bindsym $mod+KP_Subtract	gaps inner current minus 4
bindsym $mod+Shift+KP_Add	gaps outer current plus 4
bindsym $mod+Shift+KP_Subtract	gaps outer current minus 4
bindsym $mod+Shift+KP_Multiply	gaps inner current set 4; gaps outer current set -4
bindsym $mod+KP_Multiply	gaps inner current set 0; gaps outer current set 0

#=====================================================================
# Binding Modes
#=====================================================================

### GAPS Binding mode Starts ###

# Press $mod+Shift+g to enter the gap mode. Choose o or i for modifying outer/inner gaps.
# Press one of + / - (in-/decrement for current workspace) or 0 (remove gaps for current workspace).
# If you also press Shift with these keys, the change will be global for all workspaces.
set $mode_gaps Gaps: (o) outer, (i) inner
set $mode_gaps_outer Outer Gaps: +|-|0 (local), Shift + +|-|0 (global)
set $mode_gaps_inner Inner Gaps: +|-|0 (local), Shift + +|-|0 (global)
bindsym $mod+Shift+g mode "$mode_gaps"

mode "$mode_gaps" {
	bindsym o	mode "$mode_gaps_outer"
	bindsym i	mode "$mode_gaps_inner"
	bindsym Return	mode "default"
	bindsym Escape	mode "default"
}
mode "$mode_gaps_inner" {
	bindsym plus	gaps inner current plus 5
	bindsym minus	gaps inner current minus 5
	bindsym 0	gaps inner current set 0

	bindsym Shift+plus	gaps inner all plus 5
	bindsym Shift+minus	gaps inner all minus 5
	bindsym Shift+0		gaps inner all set 0

	bindsym Return mode "default"
	bindsym Escape mode "default"
}
mode "$mode_gaps_outer" {
	bindsym plus	gaps outer current plus 5
	bindsym minus	gaps outer current minus 5
	bindsym 0	gaps outer current set 0

	bindsym Shift+plus	gaps outer all plus 5
	bindsym Shift+minus	gaps outer all minus 5
	bindsym Shift+0		gaps outer all set 0

	bindsym Return mode "default"
	bindsym Escape mode "default"
}

### GAPS Binding mode Ends ###

# Set shut down, restart and locking features
bindsym $mod+Delete mode "$mode_system"
bindsym $caps+Escape mode "$mode_system"
set $mode_system l:🔒 e:🚪 u:👥 s:🌙 h:💽 r:🔄 S:❎
mode "$mode_system" {
	bindsym Delete exec $N i3-exit lock, mode "default"
	bindsym l exec $N "smc pauseall; i3-exit lock"; exec $N "sleep 0.5 && xset dpms force off", mode "default"
	bindsym s exec $N i3-exit suspend, mode "default"
	bindsym u exec $N i3-exit switch_user, mode "default"
	bindsym e exec $N i3-exit logout, mode "default"
	bindsym h exec $N i3-exit hibernate, mode "default"
	bindsym r exec $N i3-exit reboot, mode "default"
	bindsym Shift+s exec $N i3-exit shutdown, mode "default"

	# exit system mode: "Enter" or "Escape"
	bindsym Return mode "default"
	bindsym Escape mode "default"
}

# Resize window (you can also use the mouse for that)
bindsym $mod+r mode "resize"
mode "resize" {
	bindsym h resize shrink width 5 px or 5 ppt
	bindsym j resize grow height 5 px or 5 ppt
	bindsym k resize shrink height 5 px or 5 ppt
	bindsym l resize grow width 5 px or 5 ppt

	# same bindings, but for the arrow keys
	bindsym Left resize shrink width 10 px or 10 ppt
	bindsym Down resize grow height 10 px or 10 ppt
	bindsym Up resize shrink height 10 px or 10 ppt
	bindsym Right resize grow width 10 px or 10 ppt

		#
		bindsym 1 mode "default", resize set 900 400
		bindsym 2 mode "default", resize set 800 500
		bindsym 3 mode "default", resize set 800 600

	# back to normal: Enter or Escape or $mod+r
	bindsym Return mode "default"
	bindsym Escape mode "default"
	bindsym $mod+r mode "default"
}

bindsym $mod+Shift+f mode "$freeze" ;; exec $N notify-send "Distraction-free mode." "Press Super+Shift+f to return."
set $freeze FREEZED
mode "$freeze" { bindsym $mod+Shift+f mode "default"
}

# Open link with X
bindsym $caps+b mode "$broopen"
set $broopen Open With:  [F3/3]: Vivaldi/P  [F4/4]: Opera/P  [F5/5]: Firefox/P  \
[F6/6]: Chrome/P  [y]: MPV  [c]: MPV from Clipboard  [d]: dmenuhandler
mode "$broopen" {
	bindsym F3 exec $N bro-open -o $BROWSER, mode "default"
	bindsym F4 exec $N bro-open -o opera --start-maximized, mode "default"
	bindsym F5 exec $N bro-open -o firefox, mode "default"
	bindsym F6 exec $N bro-open -o google-chrome-stable, mode "default"
	bindsym 3 exec $N bro-open -o $BROWSER --incognito, mode "default"
	bindsym 4 exec $N bro-open -o opera -private --start-maximized, mode "default"
	bindsym 5 exec $N bro-open -o firefox --private-window, mode "default"
	bindsym 6 exec $N bro-open -o google-chrome-stable --incognito, mode "default"
	bindsym y exec $N bro-open --mpv, mode "default"
	bindsym c exec $N bro-open -oc mpv, mode "default"
	bindsym d exec $N bro-open -o dmenuhandler, mode "default"

		bindsym Return mode "default"
		bindsym Escape mode "default"
		bindsym $caps+b mode "default"
}

bindsym $mod+Shift+t mode "$toggle"
set $toggle  pi[c]om py-[h]ttp [k]eybase [r]edshift [s]timeout |  [d]unst [p]ulse
mode "$toggle" {
	bindsym c exec $N pkill picom || picom -b, mode "default"
	bindsym h exec $N py-http -n, mode "default"
	bindsym k exec $N toggle keybase, mode "default"
	bindsym r exec $N toggle redshift, mode "default"
	bindsym s exec $N toggle stimeout, mode "default"
	bindsym d --release exec "killall dunst; exec notify-send 'restart dunst'", mode "default"
	bindsym p exec $N systemctl --user restart pulseaudio, mode "default"

		# back to normal: Enter or Escape
		bindsym Return mode "default"
		bindsym Escape mode "default"
}

bindsym $caps+a mode "$keystroke"
set $keystroke 🔤
mode "$keystroke" {
	bindsym --release q exec $N autotype mail, mode "default"
	bindsym --release g exec $N autotype mail2, mode "default"
	bindsym --release minus exec $N autotype banner, mode "default"
	bindsym --release asterisk exec $N autotype banner2, mode "default"
	bindsym --release comma exec $N autotype mdcode, mode "default"
	bindsym --release 0 exec $N autotype shrug, mode "default"

	# back to normal: Escape or $caps+a
	bindsym Escape mode "default"
	bindsym $caps+a mode "default"
}

#=====================================================================
# Volume control
#=====================================================================

set $statuscmd i3blocks
set $statussig SIGRTMIN+10
set $volumestep 10

bindsym XF86AudioMute		exec $N i3-volume -mn -y -t $statuscmd -u $statussig
bindsym XF86AudioLowerVolume	exec $N i3-volume -np -y -d $volumestep -t $statuscmd -u $statussig
bindsym XF86AudioRaiseVolume	exec $N i3-volume -np -y -i $volumestep -t $statuscmd -u $statussig

# Switch Output
bindsym $mod+XF86AudioMute	exec $N "toggle audio; pkill -$statussig i3blocks"

## Startup/Run
bindsym $mod+XF86AudioLowerVolume	exec $N ifwin pavucontrol
bindsym $mod+XF86AudioRaiseVolume	exec $termins _blockterm -e pulsemixer

#=====================================================================

